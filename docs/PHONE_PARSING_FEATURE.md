# üìû –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### üéØ –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã** –∏–∑ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤
- **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –Ω–æ–º–µ—Ä–æ–≤ –¥–ª—è Zoho Books API
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥** –Ω–æ–º–µ—Ä–æ–≤ –≤ –ª—é–±–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- **Fallback –º–µ—Ö–∞–Ω–∏–∑–º** –¥–ª—è —Å–ª—É—á–∞–µ–≤ –∫–æ–≥–¥–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ –º–æ–∂–µ—Ç —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –Ω–æ–º–µ—Ä

### üìö –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Google libphonenumber** - –ß–µ—Ä–µ–∑ Python –±–∏–±–ª–∏–æ—Ç–µ–∫—É `phonenumbers` v9.0.10
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** –Ω–æ–º–µ—Ä–æ–≤
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞** —Å–≤—è–∑–∏

### üîß –ì–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤** (`functions/contact_creator.py`)
2. **–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤** (`telegram_bot/handlers.py`)

---

## üìù –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### üá©üá™ –ì–µ—Ä–º–∞–Ω—Å–∫–∏–µ –Ω–æ–º–µ—Ä–∞
- **–í—Ö–æ–¥–Ω–æ–π –Ω–æ–º–µ—Ä**: `+4982148068100` –∏–ª–∏ `+49 821 48068100`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: `+4982148068100` (E.164 —Ñ–æ—Ä–º–∞—Ç)
- **–°—Ç—Ä–∞–Ω–∞**: Germany
- **–ö–æ–¥ —Å—Ç—Ä–∞–Ω—ã**: 49

### üá±üáª –õ–∞—Ç–≤–∏–π—Å–∫–∏–µ –Ω–æ–º–µ—Ä–∞
- **–í—Ö–æ–¥–Ω–æ–π –Ω–æ–º–µ—Ä**: `+371 29 510 500` –∏–ª–∏ `+37129510500`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: `+37129510500` (E.164 —Ñ–æ—Ä–º–∞—Ç)
- **–°—Ç—Ä–∞–Ω–∞**: Latvia  
- **–ö–æ–¥ —Å—Ç—Ä–∞–Ω—ã**: 371

### üá¨üáß –ë—Ä–∏—Ç–∞–Ω—Å–∫–∏–µ –Ω–æ–º–µ—Ä–∞
- **–í—Ö–æ–¥–Ω–æ–π –Ω–æ–º–µ—Ä**: `020 8366 1177` (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—Ç—Ä–∞–Ω—ã GB)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: `+442083661177` (E.164 —Ñ–æ—Ä–º–∞—Ç)
- **–°—Ç—Ä–∞–Ω–∞**: United Kingdom
- **–ö–æ–¥ —Å—Ç—Ä–∞–Ω—ã**: 44

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### üìÑ –§–∞–π–ª `functions/phone_parser.py`
```python
def parse_phone_number(phone_str: str) -> Dict[str, Any]:
    """
    –ü–∞—Ä—Å–∏—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    
    Returns:
        - original: –∏—Å—Ö–æ–¥–Ω—ã–π –Ω–æ–º–µ—Ä
        - is_valid: –≤–∞–ª–∏–¥–µ–Ω –ª–∏ –Ω–æ–º–µ—Ä
        - country_code: –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã (49, 44, 371)
        - national_number: –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä
        - formatted_international: +49 821 48068100
        - formatted_e164: +4982148068100
        - country_name: –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã
        - zoho_format: –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Zoho
    """
```

### üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
```python
# –í functions/contact_creator.py
phone_data = parse_phone_number(supplier_data["phone"])
formatted_phone = phone_data.get('zoho_format', supplier_data["phone"])
contact_payload["phone"] = formatted_phone
```

### üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
```python
# –í telegram_bot/handlers.py
phone_data = parse_phone_number(analysis.get('supplier_phone'))
formatted_phone = phone_data.get('zoho_format', analysis.get('supplier_phone'))
update_data['phone'] = formatted_phone
```

---

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
```
üìû –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω: +4982148068100 -> +4982148068100 (—Å—Ç—Ä–∞–Ω–∞: Germany)
```

### ‚ö†Ô∏è –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π –Ω–æ–º–µ—Ä
```
üìû –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω (–Ω–µ –≤–∞–ª–∏–¥–µ–Ω): +12345 -> +12345
```

### ‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
```
üìû –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–æ–º–µ—Ä–∞ invalid_phone: Invalid country code
```

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### ‚úÖ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–ª—è—Ç—å –∫–æ–¥—ã —Å—Ç—Ä–∞–Ω
2. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è** - –≤—Å–µ –Ω–æ–º–µ—Ä–∞ –≤ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –≤ Zoho
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–æ–º–µ—Ä–æ–≤
4. **–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–º–µ—Ä–æ–≤ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω

### üîß –î–ª—è —Å–∏—Å—Ç–µ–º—ã
1. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Zoho Books** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è API
2. **Fallback –º–µ—Ö–∞–Ω–∏–∑–º** - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–º–µ—Ä–æ–≤
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ requirements

–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `requirements/requirements-optimized-2025.txt`:
```
phonenumbers>=8.13.50
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### üéØ –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç —Å —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏:
- –ù–µ–º–µ—Ü–∫–∏–µ: `+49 821 48068100`
- –õ–∞—Ç–≤–∏–π—Å–∫–∏–µ: `+371 29 510 500` 
- –ü–æ–ª—å—Å–∫–∏–µ: `+48 571 489 949`
- –ë—Ä–∏—Ç–∞–Ω—Å–∫–∏–µ: `020 8366 1177` (—Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã)

### ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
1. –í –ª–æ–≥–∞—Ö –ø–æ—è–≤–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ä—Å–∏–Ω–≥–µ
2. –í Zoho –∫–æ–Ω—Ç–∞–∫—Ç —Å–æ–∑–¥–∞—Å—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º
3. –í Telegram –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ: `–∏—Å—Ö–æ–¥–Ω—ã–π -> –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (—Å—Ç—Ä–∞–Ω–∞)`

---

## üìã TODO: –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤** (—Ä–∞–±–æ—á–∏–π, –º–æ–±–∏–ª—å–Ω—ã–π, —Ñ–∞–∫—Å)
- [ ] **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –Ω–æ–º–µ—Ä–∞** (–º–æ–±–∏–ª—å–Ω—ã–π/—Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–π)
- [ ] **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Contact Persons** –≤ Zoho –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤
- [ ] **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ —Ä–µ–≥–∏–æ–Ω—É** (–ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –Ω–æ–º–µ—Ä –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω—ã)

---

*–°–æ–∑–¥–∞–Ω–æ: 05.08.2025*  
*–°—Ç–∞—Ç—É—Å: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é*